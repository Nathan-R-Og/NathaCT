#include "1050.h"
#include "battle.h"
#include "sprite.h"

char D_80111C90[8192];
OSThread gIdleThread;
char gIdleThreadStack[8192];
OSThread gMainThread;
char gMainThreadStack[8192];
OSThread D_80117FF0;
char D_801181A0[4096];
void* D_801191A0;
char D_801191A4[4]; //unused?
OSMesg gPiManMsgs[50];
OSMesgQueue gPiManMgsQ;
OSMesg D_80119288;
char D_8011928C[4]; //unused?
OSMesgQueue D_80119290;
OSMesg D_801192A8;
OSMesg D_801192AC;
OSMesg D_801192B0;
char D_801192B4[4]; //unused?
OSMesgQueue gAudioDoneMessageQueue;
OSMesgQueue gFrameDrawnMessageQueue;
OSMesgQueue gSyncMessageQueue;
OSIoMesg D_80119300; //
char D_80119318[8];
char D_80119320[1024];
u64 D_80119720[8192];
Gfx D_80129720[2];
Mtx D_80129730[1];
GraphicStruct gGraphicsList[2];

long long int gspFast3DTextStart[] = {
0x090005CE201D0110, 0x0D0007F50016A020,
0x842200B800400008, 0x001915C240022000,
0x3042008014400006, 0x84150026179BFFED,
0x8F79000009000432, 0x841F0104841500B6,
0x0900043C341E0020, 0x201C0AE0001FA820,
0x201409A0001A9820, 0x235A01400D0007F5,
0x2012013F02A00008, 0x201B09A0001FA820,
0x8FD3000087D20004, 0x0D0007F587D40006,
0x0D0007F100000000, 0x02A0000800136582,
0x318C003C8D8C0160, 0x00139A0000139A02,
0x03E00008026C9820, 0x001FA8208FB30018,
0x22F2F3208FB70044, 0x1A40001A0272A020,
0x02F4A02206810008, 0x4014580032940400,
0x1680FFFD40175000, 0x8FB3004012F3FFFD,
0x0000000040934000, 0x401750000277A022,
0x068100040272A020, 0x0297A0220681FFFA,
0x000000000272B820, 0x2252FFFF20140CE0,
0x0D0007F620110001, 0x0D0007F1AFB70018,
0x4097480002A00008, 0x20170CE0304200FE,
0x8442007600400008, 0x9361FFFF841800BA,
0x841F03969361FFFD, 0x9362FFFE9363FFFF,
0x9421031E9442031E, 0x9463031E03E00008,
0x202400000D000470, 0x23F800009361FFF9,
0x9362FFFA9363FFFB, 0x841F039609000474,
0x841800BAEBBF031C, 0x8FB300248C030FE0,
0x201403E000731822, 0x0461FFA02273FFC0,
0x0D0007F52012003F, 0x0D0007F120030460,
0x0900056FAFB30024, 0x9361FFFB9762FFF9,
0x8425030E00A22820, 0x09000427ACB80000,
0xAFB90010AFB80014, 0x87A200063042FFFD,
0x3323000100031840, 0x0043102509000427,
0xA7A20006090004A0, 0x23A7000823A7000C,
0x8CE300009365FFFB, 0x9366FFFA20020001,
0x00A210042042FFFF, 0x00C2100400401027,
0x0043102400581825, 0xACE300008FB90008,
0x090004DD8FB8000C, 0x9739031E9718031E,
0x3402707087230024, 0x004310241738FFFD,
0x233900281040FF71, 0x83A200382042FFFC,
0x0440FF7620430398, 0x8C7A0000A3A20038,
0x09000427237C0000, 0x9739031E8F39001C,
0x0338C8221F20FF65, 0x8FB8FFFC090005C2,
0x8FA2000400581025, 0x09000427AFA20004,
0x8FA2000403001827, 0x0043102409000427,
0xAFA200049362FFF9, 0x9723031E00621820,
0x09000427AC780000, 0x0900042BAFB8FFFC,
0x090004DD8FB9FFFC, 0x0019160320420003,
0x0440000420420018, 0x0D00044303009820,
0x0260C020AEF90000, 0xAEF800040D00044A,
0x22F700081C40FF45, 0x000000000900042B,
0x304201FE844200C0, 0x0D0007F19361FFF9,
0x004000083026000F, 0x840800BAA4080106,
0x9369FFFACAC21800, 0xCAC21C0200094882,
0x0D0005989427031E, 0xCBB110050D0005A2,
0xCBB114054A826706, 0xCAD210024A82470F,
0x8ECF000C4AA26F0E, 0x8ED0001C4AA24F0F,
0x306100024AC2770E, 0x4AC2570F4B3F7F0E,
0xCAD214064B3F5F4F, 0x142000C822D60020,
0x4A119485C815083B, 0x4B15E5064B15ED4F,
0x4AFDE8E54AFCE0E4, 0x484D08004AF5E8E5,
0x4AF4E0E431A80707, 0x31AD707000084100,
0x000D6C0001A86825, 0x484E080031C80707,
0x4B1FED5031CE7070, 0x4B1FE510000E7300,
0x4B13E704010E4025, 0x4B13EF4D010D4025,
0x4B1FFF0E0D000400, 0xA4E800244B1FD9A3,
0xE8F518004B1ED9A7, 0xE8F418014AFAA144,
0x4AFAA94D4AE6A14E, 0x4AE6A90F2129FFFE,
0x4B1329444B13210D, 0x4B1FF94E306C0001,
0xCAC218004B3F09C7, 0xCAC21C024A0029CE,
0xC81D18054A00218F, 0xC81D1C054B1FF9CE,
0x4A7D31A3ACEF0010, 0x1180000B4A5D31A0,
0xC80320394B032946, 0x4B03210F4B232110,
0x4B1F21234B432120, 0xE8E40293ACF00018,
0xE8E4069B8CF00018, 0xE8F21005E8E61803,
0xE8E70A0FE8FB0B10, 0x0520000CE8FA0B11,
0xE8F51C05E8F41C06, 0xE8F2140FACF00038,
0xE8E61C08E8E70E23, 0xE8FB0F24E8FA0F25,
0xACE8004C20E70050, 0x1D20FFA284080106,
0x0100000830280001, 0xEBBF031C1500001B,
0x30270002201403E0, 0x302800041100000A,
0xCADA20038FB30024, 0x8FA8004C20110001,
0x2261004012680004, 0x200C003F0D0007F6,
0xAFA100240D0007F1, 0xCADC200110E0000E,
0xCADB2002EA9A2003, 0xCADD2000EA9C2001,
0x20030460EA9B2002, 0xEA9D2000200103E0,
0x200204200900057F, 0x841F00BACADA2003,
0x0900056620140420, 0x24030DE000160821,
0x0D00057F00141021, 0xEA862003EA852001,
0xC87B20000900056C, 0xC87D207E20730010,
0x4B1FF94720320008, 0xC8431800C8441804,
0xC8212000C8222002, 0xC8431C00C8441C04,
0x4A82218C20210002, 0x4A82198D20420008,
0x4A81218E4A81194F, 0x1432FFF34B1FF98E,
0x2042FFE020210008, 0xE8652000E8662002,
0x1473FFEB20630010, 0x03E0000800000000,
0x20080380C8032005, 0xCBB3080187A30004,
0xC9001800C9011801, 0xC9001C00C9011C01,
0x03E000084A030007, 0x20080460C90B1803,
0xC90B1C03C90F1807, 0xC90F1C07C9081800,
0xC9091801C90A1802, 0xC90C1804C90D1805,
0xC90E1806C9081C00, 0xC9091C01C90A1C02,
0xC90C1C04C90D1C05, 0x03E00008C90E1C06,
0xCAC0200084250270, 0x09000427E8A02000,
0x1C20000983A20038, 0x2044FFBC1C80FE6B,
0x2043039820420004, 0x035BD020035CD022,
0xAC7A0000A3A20038, 0x0D00044303009820,
0x0260D02009000427, 0x237C000000000000,
0x341E00101000FE72, 0x84150100341E0018,
0x1000FE6F841500A0, 0x3402280040822000,
0xC81F2003C81E2004, 0x8C040FC430840001,
0x14800036AC000FC4, 0x8C3700288C23002C,
0xAFB70040AFA30044, 0x4004580030840001,
0x1480000A40044800, 0x02E4B8221EE00007,
0x4005500010A00005, 0x0000000010A40003,
0x00000000090005EE, 0x3483000040045800,
0x308404001480FFFD, 0x2004000140845800,
0x4083400040834800, 0xAFA3001820170CE0,
0x8C2500108C020008, 0x8C0300108C040018,
0x8C06002000451020, 0x0065182000852020,
0x00C53020AC020008, 0xAC030010AC040018,
0xAC0600200D00043B, 0x201E00080D000432,
0x8C3A00308C220020, 0x8C230024AFA20020,
0xAFA2002400431020, 0xAFA2004C8C02FFF8,
0xAC02010809000416, 0x000000000D00043B,
0x201E00088C170BF0, 0x8C1C0BE48C1B0BE8,
0x090004278C1A0BEC, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x846B002484480024, 0x8429002401686024,
0x0168582501896024, 0x318C70701580016F,
0x01695825316B4343, 0x1560FF6DC82D1006,
0xC84E1006C86F1006, 0x8FAD000420080BE0,
0xCBB50801C8250803, 0x4A0D7291C8260807,
0x4A0D7A51C8450903, 0x4A0E6B11C8460907,
0xC8650A03C8660A07, 0x4B2A4C078429001A,
0x4B29640F844A001A, 0x4B3CE71D846B001A,
0x4B1DEF5D000D7C80, 0x48118000A4010BE0,
0xA4020BE2022F7824, 0x05E0014FA4030BE4,
0x016A382A0149602A, 0x00E7382000EC3820,
0x012B602A00E73820, 0x00EC382090E30360,
0x90E2036790E1036E, 0x84630BE084420BE0,
0x84210BE090EC0375, 0xC86F1006C84E1006,
0x19800003C82D1006, 0x4A1CFF154A1DFF51,
0x1220013A4A0E7911, 0x000D74C04A0D7291,
0x01C070274A0D7A51, 0x022E70254B1D5F73,
0x05C101314B1C5F33, 0xEAEF09014B0A5133,
0xEAEE09024B2A5933, 0xEAED09034B096133,
0x4806EA804B296933, 0x0D0004004B9F6886,
0x83A500074B9F2245, 0x4B1FFA8E30C60080,
0x4B244A3034A500C8, 0x4B1F49F283A70012,
0x4B645A304B1F59F2, 0x4BA46A304B1F69F2,
0x00C730254B9E4204, 0xA2E500004B9E39CD,
0xA2E600014B1FFA0E, 0x4BBF2107C84C080C,
0x4B153184C82C0A0C, 0x4B15294DC82C0C0C,
0x4B1FF98E4A4A4044, 0x4A4A384D4A49404E,
0x4A49380F4B1FF84E, 0xAD0300004B9F4204,
0x4B9F39CD4B1FFA0E, 0x4B9F08444B9F000D,
0x4B1FF84E4B3E0C28, 0x4B9F6305AD020004,
0x4B1FFB4EAD010008, 0x4BDE0026EAEC0804,
0x4B2282C4EAED0805, 0x4B22028DEAE00906,
0x4B1FFACEEAE10907, 0x30A70002210F0008,
0x211000104A6B68D5, 0xEAE00D0A4A6A6251,
0xEAE10D0B4B263555, 0xEAE00B0E4B252CE0,
0xEAE10B0F4B263527, 0xEAE90C084B46A555,
0xEAE30C094B459CE0, 0xEAE90A0C4B46A527,
0xEAE30A0D22F70020, 0x18E000314BBEA504,
0x8DEE00004BBE9CCD, 0x8DF1FFFC4B1FFD0E,
0x8DF2FFF8C9C91005, 0xCA291405CA561005,
0xC9CB0811C9CC0810, 0xCA2B0C114B1E5273,
0xCA2C0C104B1E7273, 0xCA5808114B1E55B3,
0xCA5908104B145984, 0x4B14618DE9130822,
0x4B13598EE9140826, 0x4B13614F4B14C404,
0x4B14CC0D4B13C50E, 0x4B13CCCF4A864C05,
0x4A854A4F4B1FFA8E, 0x4B14B4054B13B58F,
0x4B1FFDCEEA091C02, 0xEA0A1C03EA091800,
0xEA0A1801EA161804, 0xEA1718054A094A53,
0xCA1310044A16B593, 0xCA1410064A139CD3,
0x4A164C634A1754A7, 0x4A138C634A1494A7,
0xE9111010E9121012, 0x30A7000718E000A8,
0x4A1FFCACC8793802, 0x4BBE9410C82F3802,
0x4BBE961031A70200, 0x4BBE91501CE00004,
0xC8573802C8993802, 0xC88F3802C8973802,
0x4BFFCE454BFF7BC5, 0x4BFFBDC5C9101C03,
0xC90F1C02C9181C05, 0xC9171C04C9051C07,
0xC9191C06C8300F0F, 0xC82F0F0EC8580F0F,
0xC8570F0EC8650F0F, 0xC8790F0E4A10C315,
0x4A0FBAD14A058515, 0x4A197CD14A102A95,
0x4A0FCA514A188595, 0x4A177D514B645186,
0x4B64498F4BA4B18E, 0x4BA4A98F4B094A5D,
0x4B2A529D4B846186, 0x4B84598F4B44A18E,
0x4B44998F4B0B5ADD, 0x4B2C631D4B7A5184,
0x4B7A498D4B7B528E, 0x4B7B4A4F4B7A6184,
0x4B7A598D4B7B630E, 0xEAE918014B7B5ACF,
0xEAEA18034B3F6186, 0x4B3F598F4BA1518C,
0x4BA1498D4BA0538E, 0xEAEB18054BA04B4F,
0xEAEC18074B227704, 0xEAED18044B22698D,
0xEAEE18064B1FFF0E, 0x4A1C84954A067C51,
0x30A7000418E00004, 0x30A7000222F70040,
0xEAF11878EAF2187A, 0x18E0003E30A70001,
0x2010080048909800, 0x4A094E13C9141C08,
0x4A0B5E53C9151C09, 0x4B13C6054B1FFE8E,
0x4B13CE454B1FFECE, 0x4B13AD444B13A50D,
0x4B1FFD4E4B5FD686, 0x4B5FC60F4B1FFE8E,
0x4B3FDDCE4B3FCD8F, 0x4B3FA98E4B3FA14F,
0x4BA635D54BA52963, 0x4BA631A74BC635D5,
0x4BC529634BC631A7, 0x4B7E31844B7E294D,
0x4B1FF98E4B8545F2, 0x4B8641B14B1F4172,
0x4B5F31864B5F294F, 0x4B3F29604B1F31A7,
0x4B0695044B068D0D, 0x4B05950E4B058CCF,
0x4B0655844B064D8D, 0x4B05558EEAF31C00,
0x4B054D4FEAF41C02, 0x4B0666044B065E0D,
0x4B05660EEAF51C01, 0x4B055DCFEAF61C03,
0x4B0676844B066E8D, 0x4B05768EEAF71C05,
0x4B056E4FEAF81C07, 0x22F70040EAF91C7C,
0xEAFA1C7E18E0001A, 0x4B9E73864B9E6B4F,
0x4B1FFB8E4B9E8406, 0x4B9E7BCF4B1FFC0E,
0xEAED0F044B9E5286, 0xEAEE0F054B9E4A4F,
0x4B1FFA8E4B9E6306, 0x4B9E5ACF4B1FFB0E,
0xEAE90F024B227704, 0xEAEA0F034B22698D,
0xEAEB0F064B1FFF0E, 0xEAEC0F074A1C8495,
0x4A067C5122F70010, 0xEAF10F78EAF20F79,
0x0D00044A231F0000, 0x201F000003000008,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000000000000,
0x0000000000000000, 0x0000000023130000,
0xAC180FD0035BD020, 0x035CD022AC1A0FF0,
0x201410800D0007F5, 0x20120F178FB3FFFC,
0x201400000D0007F5, 0x3332FFFF20010FC0,
0x201F1080400B3000, 0x1560FFFE00000000,
0x03E0000800008820, 0x400B28001560FFFE,
0x0000000040940000, 0x1E20000340930800,
0x03E0000840921000, 0x03E0000840921800,
0x4B7D5EF24B7C5EB1, 0x4BFD5EF24BFC7EB1,
0x4B1F7EF24B5FD686, 0x4B5FDECF4B1FFE8E,
0xC81720064A1FFDAC, 0x4A1CD6044A1CDE0D,
0x4A1DD60E4A1DDE4F, 0x4A18B6154A19BE51,
0x4A18D5844A18DDCD, 0x4A19D68E4A19DECF,
0x03E0000800000000, 0x0D0007F1201B09A0,
0x8F7900008F780004, 0x00190F4230210006,
0x237B00081C200006, 0x333203FF20160AE0,
0x0D00044303009820, 0x10000006A41F0158,
0x0000000000000000, 0x341E00181000FE6E,
0x841500A0A4030C40, 0xA4020C42A4010C44,
0xA4000C4634070DB8, 0x341E0C403406000C,
0x03DE28253BDE0014, 0x10C0006A84CB00A6,
0x20C6FFFE34110000, 0x0000902534A20000,
0x090005E323CE0002, 0x010B40241112000D,
0x204200020140A025, 0xA5CA000021CE0002,
0x844A00001540FFF8, 0x854800242228FFFE,
0x1D00FFFB34A20000, 0x1100FFEB00000000,
0x03000008024B9026, 0x862800F622310002,
0x0100000884080102, 0x488A680002805025,
0x4814680037CE0000, 0x840800F8A4080106,
0x20E70028A5C70000, 0xA5C00002C9491800,
0xC94A1801CA841800, 0xCA85180100064080,
0xC901180E4B7F0807, 0x4A012B064A0122CF,
0x4B1FFB0E4A00570E, 0x4A004F4F4B1FFF0E,
0x4A5CE6944A5DEED0, 0x4ABAD7144ABBDF50,
0x4808EB004B7D59F2, 0x4B7C58F14B1F59F2,
0x4B5F18C605010003, 0x4B5F39CF4B7F18C6,
0x4B7F39CF4B1F39E1, 0x4B7F18E74B63E704,
0x4B63EF4D0D000400, 0x4B1FFF0E4A4C6714,
0x4A4B5F504ABCE314, 0x4ABDEAD04A1A63C4,
0x4A1A5BCD4A1B63CE, 0x4A1B5A0F4BBFFF04,
0x4B637BCC4B63420D, 0x4B1FFBCE4B1F4221,
0x4B7F7BE74B1F7BE2, 0x4B3F7BE74B1F7A2D,
0x4B3F42144A1DEF50, 0x4AE82F044AE8274D,
0x4AEF570C4AEF4F4D, 0x4B1FFF0EC94C3802,
0xCA8B3802C94C1405, 0xCA8B14054B6F6485,
0x4B685C8DE8F23800, 0xE8F21C01C8F21801,
0x0D0005988CEF0000, 0x480A680009000505,
0x3409000184A80000, 0xA4050106231E0000,
0x841800FEA40800B4, 0x84080106840300B4,
0x8502000285010004, 0x210800021420000D,
0xA408010603C0F809, 0x341E00101000FE72,
0x841501008C01012C, 0xACEF0000ACF00004,
0x04200022C8E43000, 0xC827383A4A1BDEEC,
0x4B1F39E3C8253038, 0x4A07DED0C8273836,
0x4B1F352A4A052180, 0x4A6630D04AC61990,
0x4A8639C01C20FFF6, 0x2021FFE0E8FB3800,
0x30680004A0EF0003, 0xA0F000078CEF0000,
0x1100FF218CF00004, 0x30680008CBA73012,
0xC80618144A943D0E, 0x110000064B1FFC8D,
0x4A1291C04A1239C0, 0x4B263D004B663D08,
0x4B46948809000504, 0x4B9F949030210FFF,
0xAC01012C0D0005A7, 0x200803E034080DE0,
0xE9085901E9085A02, 0xE9085E03E9085F04,
0xC9085F01C9085E02, 0xC9085A03C9085904,
0xE90C1C02E90D1C04, 0xE90E1C06C90C1802,
0xC90D1804C90E1806, 0xC82530374B9F2940,
0x4A8561864AA5698E, 0x4AC5718E4B1FF8CD,
0x4B5F19854A8540C8, 0x4AA548C84AC550C8,
0x4B1FF98E4A063144, 0x4A06194D4A03314E,
0x4A031E8F4A6529D4, 0x4A7AD1104A8729D4,
0x4A84D1104B4442F6, 0x4B4743F54B1F42F6,
0x4B7E7BC44B7E5ACD, 0x4B1FFBCE4B0F31C4,
0x4B0F19CD4B0B31CE, 0x4B0B190F4B1FF9CE,
0xCBA2181F4B0239E3, 0x4B2239E04B4239C6,
0xE82730388C2801C0, 0xAC2801C41C20FFDA,
0x2021FFE0090005A2, 0x841F00A000000000,
0x090005D000000000, 0x000000000D0007F1,
0x3402400040822000, 0x0000000D00000000,
0x340210008C060FD0, 0xAC1C0BE4AC1B0BE8,
0xAC1A0BECAC170BF0, 0xAC060BFC8C130108,
0x3414000034120BFF, 0x0D0007F634110001,
0x0D0007F100000000, 0x0900042F40822000,
0x0000000000000000, 0x2400BEEF00000000
};

long long int aspMainTextStart[] = {
0x2018036020170F90, 0x8C3C00308C3B0034,
0x4005580030A40001, 0x1080000630A40100,
0x1080000400000000, 0x4004580030840100,
0x1C80FFFD00000000, 0x0D00045400000000,
0x2002000F20010320, 0xAC2000001C40FFFE,
0x2042FFFF40023000, 0x1440FFFE201D0380,
0x408038008FBA0000, 0x8FB90004001A0DC2,
0x302100FE239C0008, 0x237BFFF823BD0008,
0x23DEFFF800011020, 0x8442001000400008,
0x000000000000000D, 0x1FC0FFF200000000,
0x1B60000500000000, 0x0D00045400000000,
0x0900043500000000, 0x3401400040812000,
0x0000000D00000000, 0x1000FFFF00000000,
0x23E50000001C1020, 0x236300002064FEC0,
0x1880000220010380, 0x20030140207E0000,
0x0D0004612063FFFF, 0x201D038000A00008,
0x0000000040043800, 0x1480FFFE00000000,
0x400428001480FFFE, 0x0000000040810000,
0x4082080040831000, 0x03E0000800000000,
0x400438001480FFFE, 0x0000000040042800,
0x1480FFFE00000000, 0x4081000040820800,
0x4083180003E00008, 0x000000003323FFFF,
0x1060FFCD200405C0, 0x3342FFFF00441020,
0x4A01086C2063FFF0, 0xE8411800E8411801,
0x204200101C60FFFC, 0x2063FFF009000446,
0x0000000097030004, 0x1060FFBF00191200,
0x0002120200192602, 0x000420808C850320,
0x0045102097010000, 0x0D0004612063FFFF,
0x400130001420FFFE, 0x0000000009000446,
0x4080380097030004, 0x1060FFAF00191200,
0x0002120200192602, 0x000420808C850320,
0x0045102097010002, 0x0D00046C2063FFFF,
0x400130001420FFFE, 0x0000000009000446,
0x4080380000191200, 0x0002120200192602,
0x000420808C850320, 0x00451020200104C0,
0x3343FFFF0D000461, 0x2063FFFF40013000,
0x1420FFFE00000000, 0x0900044640803800,
0x00191A0000031A02, 0x0019160200021080,
0x0002202009000446, 0xAC830320234105C0,
0x00191402204205C0, 0x001A240230840008,
0x1C800005232305C0, 0xA7010000A7020002,
0x09000446A7190004, 0xA703000EA701000A,
0x09000446A702000C, 0x001A140230410008,
0x1020000430410004, 0xA71A001C09000446,
0xA719001E10200007, 0x3041000210200003,
0x0000000009000446, 0xA71A000609000446,
0xA71A000810200005, 0x00190C02A71A0010,
0xA701001209000446, 0xA7190014A71A0016,
0xA701001809000446, 0xA719001A97010004,
0x970400021020FF60, 0x3323FFFF206305C0,
0x00191402204205C0, 0xC8412000C8622000,
0xE8810800E8820801, 0xE8810902E8820903,
0xE8810A04E8820A05, 0xE8810B06E8820B07,
0xE8810C08E8820C09, 0xE8810D0AE8820D0B,
0xE8810E0CE8820E0D, 0xE8810F0EE8820F0F,
0x2021FFF020420010, 0x206300101C20FFEA,
0x2084002009000446, 0x000000003321FFFF,
0x1020FF413342FFFF, 0x204205C000191C02,
0x206305C0C8411800, 0xC84218012021FFF0,
0x20420010E8611800, 0xE86218011C20FFF9,
0x2063001009000446, 0x0000000000190A00,
0x00010A0200191E02, 0x000318808C620320,
0x00220820AF010010, 0x0900044600000000,
0xC81F20004A1BDEEC, 0x971500004A19CE6C,
0x4A18C62C22B40001, 0x971300024A0D6B6C,
0x4A0E73AC97120004, 0x4A0F7BEC3C0100FF,
0x4A10842C3421FFFF, 0x4A118C6C03218824,
0x4A1294AC00191602, 0x4A139CEC00021080,
0x8C43032002238820, 0xEA7B2000EA7B2001,
0x001A0C0230210001, 0x1C20000C001A0C02,
0x3021000210010002, 0x222200008F020010,
0x226100000D000461, 0x2003001F40053000,
0x14A0FFFE00000000, 0x4080380020100030,
0x200F04C0CA191800, 0xCA181C00CA171801,
0xCA171C01CA7B2001, 0x227300201240006E,
0xCA81180092A10000, 0x302B000F000B5940,
0x4B01C8E8016F6820, 0x4B21C12800017102,
0x4B41C9682002000C, 0x4B61C1A8004E7022,
0x21C2FFFF20030001, 0x00031BC000432006,
0x4884B000C9B52000, 0xC9B4200121ADFFFE,
0xC9B3280221ADFFFE, 0xC9B2280221ADFFFE,
0xC9B1280221ADFFFE, 0xC9B0280221ADFFFE,
0xC9AF280221ADFFFE, 0xC9AE280221ADFFFE,
0xC9AD280222940009, 0x4A171F8622B50009,
0x4A17278ECA811800, 0x4A172F4692A10000,
0x4A17374E19C00003, 0x302B000F4B16F785,
0x4B16EF45000B5940, 0x4B01C8E8016F6820,
0x4B21C1284B41C968, 0x4B61C1A800017102,
0x4BDBA8872002000C, 0x4BFBA08F004E7022,
0x4B1E988F21C2FFFF, 0x4B3E908F20030001,
0x4B5E888F00031BC0, 0x4B7E808F00432006,
0x4B9E7F0F4884B000, 0x4BBE708F4BDE688F,
0x4BBFF08F4B3C3E9D, 0x4B1C3F1D4B9FD086,
0x4B9FE70F4B1D9887, 0x21ACFFFE4B3D908F,
0xC99328024B5D888F, 0x218CFFFE4B7D808F,
0xC99228024B9D788F, 0x218CFFFE4BBD708F,
0xC99128024BDD688F, 0x218CFFFE4BBFE88F,
0xC99028024BDCA88F, 0x218CFFFE4BFCA08F,
0xC98F28024B3B3E9D, 0x218CFFFE4B1B3EDD,
0xC98E2802218CFFFE, 0xC98D2802C9B52000,
0x4B9FD086C9B42001, 0x4B9FDECF2252FFE0,
0xEA7C1800EA7C1C01, 0xEA7B1802EA7B1C03,
0x1E40FFB422730020, 0x2261FFE022220000,
0x0D00046C2003001F, 0x4005300014A0FFFE,
0x0000000009000446, 0x40803800C81F2000,
0x4A1CE72C97150000, 0x4A118C6C97140002,
0x4A1294AC97130004, 0x4A139CEC12600051,
0x334EFFFF488EFD00, 0x000E7080488E8000,
0x3C0100FF4A14A52C, 0x3421FFFF4A15AD6C,
0x032190244A16B5AC, 0x001916024A17BDEC,
0x000210808C430320, 0x02439020EAFC1000,
0x001A0C0230210001, 0x1C20000900000000,
0x22E1000022420000, 0x0D00046120030007,
0x4005300014A0FFFE, 0x0000000040803800,
0x200D04C020010004, 0x48817000C9B82001,
0x4B10C405CAFC1C00, 0xE9B02001C9B92000,
0x21ADFFFEC9B72802, 0x21ADFFFEC9B62802,
0x21ADFFFEC9B52802, 0x21ADFFFEC9B42802,
0x21ADFFFEC9B32802, 0x21ADFFFEC9B22802,
0x21ADFFFEC9B12802, 0xCABE1800CABE1C01,
0x4BDCCC0722B50010, 0x4BFCC40F2273FFF0,
0x4B1EBC0F4B3EB40F, 0x4B5EAC0F4B7EA40F,
0x4B9E9F0F4BBE940F, 0x4BDE8C0F4BBFF40F,
0xCABE18004B3C7E9D, 0xCABE1C014B1C7F1D,
0x4B0ED4064B0EE70F, 0xEA9C1800EA9C1C01,
0x1E60FFEB22940010, 0x2281FFF822420000,
0x0D00046C20030007, 0x4005300014A0FFFE,
0x0000000009000446, 0x4080380087080000,
0x8713000287120004, 0x3C0400FF3484FFFF,
0x0324102400192E02, 0x000528808CA60320,
0x0046102022E10000, 0xAEE200402003001F,
0x001A3C0230EA0001, 0x1D40000800000000,
0x0D00046100000000, 0x400130001420FFFE,
0x000000000900063A, 0x40803800A6E00008,
0x4A10842CEAF01800, 0x30EA000211400006,
0x0000000086EB000A, 0xCAE32001E903187E,
0xE9031C7F010B4022, 0x2108FFF8CAF70F04,
0xCAF01800E9101800, 0x48889200200A00C0,
0x488A9300489A9400, 0x200A0040488A9500,
0x20090040C93F2001, 0xC93920004A1FCE51,
0xC93E2002C93D2003, 0xC93C2004C93B2005,
0xC93A20064A1FCE51, 0xC938200722F50020,
0x22F400304A16B5AC, 0x4BF7FDC54B92CD8D,
0x4B1EFDCE4B52FD46, 0x4B5EB54E4BB2BC44,
0x4B9E8C464B72FC4E, 0xC9392000EAB52000,
0xEA912000EAF70B84, 0x86B1000086890000,
0x86AD000886850008, 0x86B0000286880002,
0x86AC000A8684000A, 0x86AF000486870004,
0x86AB000C8683000C, 0x86AE000686860006,
0x86AA000E8682000E, 0xCA3018004BF7FDC5,
0xC92F18004BF6FDCF, 0xC9B01C004B92CD8D,
0xC8AF1C004B1EFDCE, 0xCA0E18004B52FD46,
0xC90D18004B5EB54E, 0xC98E1C004BB2BC44,
0xC88D1C00C9EC1800, 0xC8EB1800C96C1C00,
0x4B9E8C46C86B1C00, 0xC9CA1800C8C91800,
0x4B72FC4EC94A1C00, 0x4A0F8200C8491C00,
0x4A0D71C0EAB52000, 0x4A0B6180EA912000,
0x86B100004A095140, 0x868900004A684210,
0x86AD00084A6739D0, 0x868500084A663190,
0x86B000024A652950, 0x868800024AC84210,
0x86AC000A4AC739D0, 0x8684000A4AC63190,
0x86AF00044AC52950, 0x868700044A88E906,
0x86AB000C4A87E10E, 0x8683000C4A86D90E,
0x86AE00064A85D10E, 0x8686000686AA000E,
0x2252FFF0EA642000, 0x1A4000038682000E,
0x0900067622730010, 0xEAF70804CA301800,
0xEAF0180087060000, 0x2231000802262822,
0x30A4000F02248822, 0x1080000220070010,
0x00E42022A6E4000A, 0xCA231800CA231C01,
0xEAE320018EE20040, 0x22E100000D00046C,
0x2003001F40053000, 0x14A0FFFE00000000,
0x0900044640803800, 0x3C0400FF3484FFFF,
0x0324102400192E02, 0x000528808CA60320,
0x0046102022E10000, 0x2003004F4A00002C,
0x200B0040C97F2001, 0xC80A2000001A6402,
0x318A000111400003, 0xCB182001090006EC,
0x000000000D000461, 0x0000000040053000,
0x14A0FFFE00000000, 0x40803800CAF42000,
0xCAF52001CAF22002, 0xCAF32003CAF82004,
0x870D000087130002, 0x8712000A8711000C,
0x8710000E870E0004, 0x200F00104815C100,
0x4814C40031890008, 0x1D20000400000000,
0x22F1005000118020, 0x200F000011400040,
0xC97E2007C9B12000, 0xCA7D2000CA3B2000,
0x4A15AD6CCB140F03, 0x4B58A5C54B38A58F,
0x4B00FDCE4A15BDD5, 0x4A14B5914BF7F5C4,
0x4BF6F5CE4B00FD8D, 0x4BF5FD4D4BF4FD0F,
0x1EA000044B00FD4E, 0x4B18A52309000712,
0x000000004B18A524, 0x4BD8A4004BF8A3C0,
0x4BCAEF404A108F48, 0x4BCADEC04A0F8EC8,
0xEA7D2000EA3B2000, 0xCA5C2000CA1A2000,
0x4A139CECCB120F04, 0x4BB895C54B98958F,
0x4B00FDCE4A13BDD5, 0x4A12B5914BF7F5C4,
0x4BF6F5CE4B00FD8D, 0x4BF3FCCD4BF2FC8F,
0x1E8000044B00FCCE, 0x4B7894A30900072E,
0x000000004B7894A4, 0x4BD894004BF893C0,
0x4BCAE7004A108F08, 0x4BCAD6804A0F8E88,
0xEA5C2000EA1A2000, 0x21CEFFF021AD0010,
0x2273001022520010, 0x022F8820020F8020,
0x4B58ADC44B58A5CD, 0x4B38ADCE4B38A50F,
0x4B00FD4E1EA0000A, 0xC9B120004B18A523,
0x4BB89DC44BB895CD, 0x4B989DCECA7D2000,
0x4B98948FCA3B2000, 0x090007544B00FCCE,
0x4B18A5244BB89DC4, 0x4BB895CD4B989DCE,
0xCA7D20004B98948F, 0xCA3B20004B00FCCE,
0x4BD8A400EAF42000, 0x4BF8A3C0EAF52001,
0x4BCAEF404A108F48, 0xCA5C20004BCADEC0,
0xCA1A20004A0F8EC8, 0x1E800009EA7D2000,
0x4B7894A34B58ADC4, 0xEA3B20004B58A5CD,
0x4B38ADCE4B38A50F, 0x0900076F4B00FD4E,
0x4B7894A44B58ADC4, 0xEA3B20004B58A5CD,
0x4B38ADCE4B38A50F, 0x4B00FD4E4BD89400,
0x21CEFFF04BF893C0, 0x227300104BCAE700,
0x022F88204A108F08, 0x21AD00104BCAD680,
0x4A0F8E88EA5C2000, 0x2252001019C00003,
0xEA1A200009000741, 0x020F8020EAF22002,
0xEAF32003EAF82004, 0x0D00046C2003004F,
0x4005300014A0FFFE, 0x0000000009000446,
0x40803800C81F2000, 0x9712000412400019,
0x000000003333FFFF, 0x227305C00019A402,
0x229405C03351FFFF, 0x4891F000CA7B2000,
0xCA9D2000CA7A2001, 0xCA9C20014BDFDEC0,
0x2252FFE04B1EEEC8, 0x22940020EA7B2000,
0x4BDFD680CA9D2000, 0x4B1EE688CA9C2001,
0xEA7A200122730020, 0xCA7B20001E40FFF3,
0xCA7A200109000446, 0x0000000000000000
};

extern u64* D_80200CB0;
//if you can get the pointers to build be my guest
OSTask D_800F04E0[2] = {
{
    1,
    0,
    NULL,
    0,
    NULL,
    0x1000,
    NULL,
    0x800,
    0x80119320,
    0x400,
    0x80119720,
    NULL,
    NULL,
    0,
    0x80200CB0,
    0xC00
},
{
    1,
    0,
    NULL,
    0,
    NULL,
    0x1000,
    NULL,
    0x800,
    0x80119320,
    0x400,
    0x80119720,
    NULL,
    NULL,
    0,
    0x80200CB0,
    0xC00
}};


s32 D_800F0560 = 0;
//levelGroup segmented pointers
u32 D_800F0564[2] = {0x0301B5E8, 0x0301B5F4};

s32 D_800F056C[6] = {7, 170, 5, 135, 180, 98};
s32 D_800F0584[6] = {49, 5, 180, 5, 170, 81};
s32 D_800F059C[6] = {96, 39, 20, 97, 80, 144};

f32 D_800F05B4[11] = {10, -30, 80, -30, 45, -23, 0, 70, -65, 33, 10};
f32 D_800F05E0[11] = {-70, -50, -70, 20, 35, 0, 80, 35, -46, 21, -70};
f32 D_800F060C[11] = {90, 65, -40, 10, -10, -73, 0, 45, -35, -73, -50};


Gfx* ChameleonGfxs[6] = {
    Davy_restAssociate_Gfx,
    Jack_restAssociate_Gfx,
    Fred_restAssociate_Gfx,
    Linda_restAssociate_Gfx,
    Black_restAssociate_Gfx,
    White_restAssociate_Gfx
};

void bootproc(void) {
    __osInitialize_common();
    gControllerNo = 1;                            //gIdleThreadStack[1024]
    osCreateThread(&gIdleThread, 1, idleproc, 0, &gMainThread, 10);
    osStartThread(&gIdleThread);
}

void idleproc(void *arg0) {
    osCreateViManager(OS_PRIORITY_VIMGR);
    osViSetMode(&osViModeTable[2]);
    osViBlack(1);
    osViSetSpecialFeatures(OS_VI_DITHER_FILTER_ON);
    osViSetSpecialFeatures(OS_VI_DIVOT_OFF);
    osCreatePiManager(OS_PRIORITY_PIMGR, &gPiManMgsQ, gPiManMsgs, 50);
    osCreateThread(&gMainThread, 3, mainproc, arg0, &D_80117FF0, 10);
    osStartThread(&gMainThread);                  //gMainThreadStack[1024]
    osSetThreadPri(0, 0);

    while (TRUE) {};
}

#pragma GLOBAL_ASM("asm/nonmatchings/code/1050/mainproc.s")

//animates the player
#ifdef NON_MATCHING
void func_80025EF0(PlayerActor* arg0, Tongue* arg1, s32 arg2) {
    s32 sp124;
    s32 sp120 = arg0->globalTimer * 0.8f;
    s32 animObjects;
    s32 animFrames;
    Mtx* anim = NULL;
    Mtx* sp110 = D_800FF8D4;

    func_8007AC2C(&sp120);

    if (arg0->playerHURTSTATE == 3 && gTimer % 2 != 0) {
        return;
    }

    if (D_80174980 == 5) {
        func_80027240(&D_800FF8D4, gSpriteListings[207].bitmapP, gTimer / 2, gSpriteListings[207].tileCountY);
        if (gTimer == 20) {
            Effect_TypeT_Init(22.0f, 154.0f, 60, D_800F686C);
        }
        if (gTimer == 120) {
            Effect_TypeT_Init(22.0f, 154.0f, 60, D_800F6870);
        }
    } else if (arg0->playerHURTSTATE == 4) {
        func_80027138(&static0_chameleonAnimPointers_Animp[10], &animObjects, &animFrames, &anim);
        sp124 = arg0->playerHURTTIMER;
        if (sp124 >= animFrames) {
            sp124 = animFrames - 1;
        }
        func_80027240(&D_800FF8D4, anim, sp124, animObjects);
    } else if (arg0->amountLeftToShoot != 0) {
        func_80027138(&static0_chameleonAnimPointers_Animp[4], &animObjects, &animFrames, &anim);
        sp124 = arg0->amountLeftToShoot;
        if (sp124 >= animFrames) {
            sp124 = animFrames - 1;
        }
        func_80027240(&D_800FF8D4, anim, sp124, animObjects);
    } else if (arg0->vaultFall != 0) {
        func_80027138(&static0_chameleonAnimPointers_Animp[5], &animObjects, &animFrames, &anim);
        func_80027240(&D_800FF8D4, anim, animFrames - arg0->vaultFall, animObjects);
    } else if (arg0->playerHURTSTATE == 1) {
        sp124 = arg0->playerHURTTIMER - 10;
        func_80027138(&static0_chameleonAnimPointers_Animp[8], &animObjects, &animFrames, &anim);
        if (sp124 < 0) {
            sp124 = 0;
        } else if (sp124 >= animFrames) {
            sp124 = animFrames - 1;
        }
        func_80027240(&D_800FF8D4, anim, sp124, animObjects);
    } else if (arg0->playerHURTSTATE == 2) {
        if (arg0->hp > 0) {
            sp124 = arg0->playerHURTTIMER;
        } else {
            sp124 = arg0->playerHURTTIMER / 3;
        }       
        func_80027138(&static0_chameleonAnimPointers_Animp[9], &animObjects, &animFrames, &anim);
        if (sp124 >= animFrames) {
            sp124 = animFrames - 1;
        }
        func_80027240(&D_800FF8D4, anim, sp124, animObjects);
    } else if (arg1->tongueMode != 0) {
        switch (arg1->tongueMode) {
            case 1:
            case 2:
            case 3:
                sp124 = arg1->segments;
                if (sp124 > 3) {
                    sp124 = 3;
                }
                func_80027138(&static0_chameleonAnimPointers_Animp[4], &animObjects, &animFrames, &anim);
                func_80027240(&D_800FF8D4, anim, sp124, animObjects);
                break;
            case 4:
                sp124 = arg1->timer % 2 + 4;
                func_80027138(&static0_chameleonAnimPointers_Animp[4], &animObjects, &animFrames, &anim);
                func_80027240(&D_800FF8D4, anim, sp124, animObjects);
                break;
            case 5:
                sp124 = arg1->poleSegmentAt % 6 + 6;
                func_80027138(&static0_chameleonAnimPointers_Animp[4], &animObjects, &animFrames, &anim);
                func_80027240(&D_800FF8D4, anim, sp124, animObjects);
                break;
            case 6:
            case 7:
                func_80027138(&static0_chameleonAnimPointers_Animp[4], &animObjects, &animFrames, &anim);
                func_80027240(&D_800FF8D4, anim, arg1->timer + 12, animObjects);
                break;
            case 8:
            case 9:
                func_80027138(&static0_chameleonAnimPointers_Animp[5], &animObjects, &animFrames, &anim);
                func_80027240(&D_800FF8D4, anim, arg1->segments, animObjects);
                break;
            case 11:
                sp124 = arg1->timer;
                if (sp124 >= 7) {
                    sp124 = (sp124 - 7) % 7 + 7;
                }
                if (arg0->unkBC > 0) {
                    func_80027138(&static0_chameleonAnimPointers_Animp[7], &animObjects, &animFrames, &anim);
                    if (sp124 >= animFrames) {
                        sp124 = animFrames - 1;
                    }
                    func_80027240(&D_800FF8D4, anim, sp124, animObjects);
                } else {
                    func_80027138(&static0_chameleonAnimPointers_Animp[6], &animObjects, &animFrames, &anim);
                    if (sp124 >= animFrames) {
                        sp124 = animFrames - 1;
                    }
                    func_80027240(&D_800FF8D4, anim, sp124, animObjects);
                }
                break;
            default:
                func_80027138(&static0_chameleonAnimPointers_Animp[0], &animObjects, &animFrames, &anim);
                func_80027240(&D_800FF8D4, anim, (s32)arg0->globalTimer % animFrames, animObjects);
                break;
        }
    } else if (arg0->canJump != 0) {
        if (arg0->vel.y > 0.0f) {
            func_80027138(&static0_chameleonAnimPointers_Animp[3], &animObjects, &animFrames, &anim);
            func_80027240(&D_800FF8D4, anim, 0, animObjects);
        } else {
            func_80027138(&static0_chameleonAnimPointers_Animp[3], &animObjects, &animFrames, &anim);
            if (-arg0->vel.y * 8.0f < arg0->pos.y - arg0->yCounter) {
                arg0->jumpAnimFrame %= 10;
                sp124 = arg0->jumpAnimFrame / 2 + 4;
            } else {
                if (arg0->jumpAnimFrame < 9) {
                    arg0->jumpAnimFrame = 9;
                }
                sp124 = arg0->jumpAnimFrame;
                if (sp124 >= animFrames) {
                    sp124 = animFrames - 1;
                }
            }
            func_80027240(&D_800FF8D4, anim, sp124, animObjects);
        }
    } else if (arg0->groundMovement == 0) {
        func_80027138(&static0_chameleonAnimPointers_Animp[0], &animObjects, &animFrames, &anim);
        func_80027240(&D_800FF8D4, anim, (s32)arg0->globalTimer % animFrames, animObjects);
    } else if (arg0->groundMovement == 1) {
        func_80027138(&static0_chameleonAnimPointers_Animp[1], &animObjects, &animFrames, &anim);
        func_80027240(&D_800FF8D4, anim, sp120 % animFrames, animObjects);
        if (D_800F0560 == 0 && sp120 % animFrames >= 3 && sp120 % animFrames <= 12) {
            if (arg0->inWater == 1) {
                PLAYSFXAT(2, arg0->pos, 0, 0);
            } else {
                PLAYSFXAT(0, arg0->pos, 0, 0);
            }
            D_800F0560 = 1;
        } else if (D_800F0560 == 1 && sp120 % animFrames > 12) {
            if (arg0->inWater == 1) {
                PLAYSFXAT(3, arg0->pos, 0, 0);
            } else {
                PLAYSFXAT(1, arg0->pos, 0, 0);
            }
            D_800F0560 = 0;
        }
    } else {
        func_80027138(&static0_chameleonAnimPointers_Animp[2], &animObjects, &animFrames, &anim);
        func_80027240(&D_800FF8D4, anim, sp120 % animFrames, animObjects);
        if (D_800F0560 == 0 && sp120 % animFrames >= 0 && sp120 % animFrames <= 9) {
            if (arg0->inWater == 1) {
                PLAYSFXAT(2, arg0->pos, 0, 0);
            } else {
                PLAYSFXAT(0, arg0->pos, 0, 0);
            }
            D_800F0560 = 1;
        } else if (D_800F0560 == 1 && sp120 % animFrames > 9) {
            if (arg0->inWater == 1) {
                PLAYSFXAT(3, arg0->pos, 0, 0);
            } else {
                PLAYSFXAT(1, arg0->pos, 0, 0);
            }
            D_800F0560 = 0;
        }
    }

    if (arg0->power == 1 && (arg0->powerTimer >= 30 && arg0->powerTimer <= arg0->powerTimerTill - 30 || !(gTimer % 2))) {
        Mtx spD0;
        guMtxIdent(&spD0);
        guScale(&spD0, 2.0f, 2.0f, 2.0f);
        guMtxCatL(&spD0, &sp110[4], &sp110[4]);
        guMtxCatL(&spD0, &sp110[3], &sp110[3]);
    }

    if (arg0->power == 2 && (arg0->powerTimer >= 30 && arg0->powerTimer <= arg0->powerTimerTill - 30 || !(gTimer % 2))) {
        Mtx sp90;
        guMtxIdent(&sp90);
        guScale(&sp90, 2.0f, 2.0f, 2.0f);
        guMtxCatL(&sp90, &sp110[1], &sp110[1]);
    }

    if (arg0->playerID == 0) {
        f32 sp8C, sp88, sp84;
        Mtx sp40;
        guRotate(&sp40, arg0->yAngle, 0.0f, 1.0f, 0.0f);
        guMtxCatL(&sp110[1], &sp40, &sp40);
        guMtxXFML(&sp40, 0, 0, 0, &sp8C, &sp88, &sp84);
        D_80168D88 = arg0->pos.x + sp8C;
        D_80168D8C = arg0->pos.y + sp88;
        D_80168D90 = arg0->pos.z + sp84;
        if (D_80174980 == 4) {
            Effect_TypeAF_Init(&D_80168D88, &D_80168D8C, &D_80168D90, 50.0f, 20.0f, 10.0f, 5, 180, 75);
        }
    }
}
#else
#pragma GLOBAL_ASM("asm/nonmatchings/code/1050/func_80025EF0.s")
void func_80025EF0(PlayerActor* arg0, Tongue* arg1, s32 arg2);
#endif

s32 func_80026C78(Actor* actor) {
    return 1 - func_800AF604(actor->pos.x, actor->pos.y, actor->pos.z, 8000.0f);
}

//adjustment for BL_BOSS_SEGMENT
void func_80026CA8(GraphicStruct *arg0, Mtx *arg1, u32 arg2, f32 arg3, s32 arg4) {
    f32 xPos = 0.0f;
    f32 yPos = 0.0f;
    f32 zPos = 0.0f;
    
    func_800849DC(0, gTongues, &gPlayerActors[0], gCamera);
    guMtxXFML(&arg0->actorRotate[arg2], xPos, yPos, zPos, &xPos, &yPos, &zPos);         // 4x4 fp matrix
    guMtxXFML(&arg0->actorScale[arg2], xPos, yPos, zPos, &xPos, &yPos, &zPos);
    guMtxCatL(arg1, &arg0->actorRotate[arg2], arg1);
    guMtxCatL(arg1, &arg0->actorScale[arg2], arg1);
    func_80059254(arg1, gActors[arg2].pos.x + xPos, gActors[arg2].pos.y + yPos, gActors[arg2].pos.z + zPos, arg3, arg3, 0.0f, arg4);
}

void func_80026E30(GraphicStruct *arg0, Mtx *arg1, u32 arg2, f32 arg3, s32 arg4) {
    f32 xPos = 0.0f;
    f32 yPos = 0.0f;
    f32 zPos = 0.0f;
    
    func_800849DC(0, gTongues, &gPlayerActors[0], gCamera);
    guMtxXFML(&arg0->actorRotate[arg2], xPos, yPos, zPos, &xPos, &yPos, &zPos);
    guMtxXFML(&arg0->actorScale[arg2], xPos, yPos, zPos, &xPos, &yPos, &zPos);
    guMtxCatL(arg1, &arg0->actorRotate[arg2], arg1);
    guMtxCatL(arg1, &arg0->actorScale[arg2], arg1);
    func_800598C4(arg1, gActors[arg2].pos.x + xPos, gActors[arg2].pos.y + yPos, gActors[arg2].pos.z + zPos, arg3, arg3, 0.0f, arg4);
}

void func_80026FB8(GraphicStruct *arg0, Mtx *arg1, u32 arg2, f32 arg3, f32 arg4, s32 arg5) {
    f32 xPos, yPos, zPos;
    zPos = yPos = xPos = 0.0f;
    
    func_800849DC(0, gTongues, &gPlayerActors[0], gCamera);
    guMtxXFML(arg1, xPos, yPos, zPos, &xPos, &yPos, &zPos);
    guMtxXFML(&arg0->actorRotate[arg2], xPos, yPos, zPos, &xPos, &yPos, &zPos);
    guMtxXFML(&arg0->actorScale[arg2], xPos, yPos, zPos, &xPos, &yPos, &zPos);
    func_8005747C(gActors[arg2].pos.x + xPos, gActors[arg2].pos.y + yPos + arg4, gActors[arg2].pos.z + zPos, arg3, arg3, 0.0f, arg5);
}


//WriteAnimationData
/**
 * @brief Writes the animation data of a given Animation set (through AnimPointer) to a requested place in ram.
 * @param pointer: The AnimPointer in which to read data
 * @param ramObjects: The location in ram in which to write pointer->noObjects
 * @param ramFrames: The location in ram in which to write pointer->noFrames
 * @param ramAnim: The location in ram in which to write pointer->animation (as a pointer)
 */
void func_80027138(AnimPointer* pointer, s32* ramObjects, s32* ramFrames, Mtx** ramAnim) {
    s32* newInt;
    AnimPointer* realPointer;

    //this is required to be 1 line or codegen breaks
    if (!IS_SEGMENTED(pointer)) {realPointer = pointer;} else {realPointer = SEGMENTED_TO_VIRTUAL(pointer);}
    
    if (!IS_SEGMENTED(realPointer->noObjects)) {
        newInt = realPointer->noObjects;
    } else {
        newInt = SEGMENTED_TO_VIRTUAL(realPointer->noObjects);
    }
    
    *ramObjects = *newInt;
    
    if (!IS_SEGMENTED(realPointer->noFrames)) {
        newInt = realPointer->noFrames;
    } else {
        newInt = SEGMENTED_TO_VIRTUAL(realPointer->noFrames);
    }

    *ramFrames = *newInt;
    
    if (!IS_SEGMENTED(realPointer->animation)) {
        *ramAnim = realPointer->animation;
    } else {
        *ramAnim = SEGMENTED_TO_VIRTUAL(realPointer->animation);
    }
}

extern Mtx D_80147FF0[];
extern Mtx D_80167AF0[];

//arg0 == write to, arg1 == read from, arg2 == frames(?), arg3 == objects
void func_80027240(Mtx** arg0, Mtx* arg1, s32 arg2, s32 arg3) {
    Mtx* mtxPtr = *arg0;
    s32 i;

    for (i = 0; i < arg3; i++) {
        *mtxPtr++ = arg1[arg2 * arg3 + i];
    }

    *arg0 = mtxPtr;
}

void func_800273F8(s32 actorIndex) {
    s32 i; 
    for (i = 0; i < gActors[actorIndex].tongueCollision; i++) {
        func_80080C28(gActors[actorIndex].pos.x + gActors[actorIndex].unknownPositionThings[i].unk_00,
                      gActors[actorIndex].pos.y + gActors[actorIndex].unknownPositionThings[i].unk_04 + gActors[actorIndex].unknownPositionThings[i].unk_10 / 2,
                      gActors[actorIndex].pos.z + gActors[actorIndex].unknownPositionThings[i].unk_08,
                      gActors[actorIndex].unknownPositionThings[i].unk_0C,
                      gActors[actorIndex].unknownPositionThings[i].unk_10 / 2,
                      gActors[actorIndex].unknownPositionThings[i].unk_0C,
                      100, 100, 100, 100);
    }
}

void func_800274F0(Actor* actor) {
    s32 unused;
    f32 sp38 = (f32)(gTimer % 31) / 32;
    f32 sp34 = actor->unknownPositionThings[0].unk_10;
    unkStruct* sp30 = &D_80172E88[actor->userVariables[0]];    

    func_80058044(actor->pos.x, actor->pos.y + sp34 / 2, actor->pos.z,
                  sp34 * 3 / 2, sp34 * 3 / 2,
                  -actor->unk_90, sp38, 7);
    func_8005747C(sp30->unk_08[actor->userVariables[1]],
                  sp30->unk_48[actor->userVariables[1]] + sp34 / 2,
                  sp30->unk_88[actor->userVariables[1]],
                  sp34, sp34, sp38, 8);
    func_8005747C(sp30->unk_08[actor->userVariables[2]],
                  sp30->unk_48[actor->userVariables[2]] + sp34 / 2,
                  sp30->unk_88[actor->userVariables[2]],
                  sp34, sp34, sp38, 8);
}

/**
 * @brief Returns the index of the first active player actor, or 0 if none are active signalling single player.
 * 
 * @return (s32) The highest index of an active player actor. 
 */
s32 func_80027650(void) {       // GetHighestActivePlayerIndex
    s32 i;
    
    for (i = 3; i >= 0; i--) {
        if (gPlayerActors[i].active != 0 && gPlayerActors[i].exists) {
            break;
        }
    }
    
    if (i < 0) {
        i = 0;
    }
    
    return i;
}

#pragma GLOBAL_ASM("asm/nonmatchings/code/1050/func_80027694.s")
void func_80027694(GraphicStruct* arg0);

//draw player
Gfx* func_8002A190(GraphicStruct* arg0, Gfx* gfxPos, PlayerActor* player, Tongue* tongue, s32 playerIndex) {
    f32 scaleX = 1.4f;
    f32 scaleY = player->yScale * 1.4f;    
    f32 scaleZ = 1.4f;
    f32 sp28 = 25.0f;

    if (player->power == 3 && (player->powerTimer >= 20 && player->powerTimer <= player->powerTimerTill - 20 || !(gTimer % 2))) {
        scaleX /= 2.0f;
        scaleY /= 2.0f;
        scaleZ /= 2.0f;
        sp28 /= 2.0f;
    }

    guTranslate(&arg0->playerTranslate[playerIndex], player->pos.x, player->pos.y - sp28 * player->yScale, player->pos.z);
    guRotate(&arg0->playerRotate[playerIndex], player->yAngle + 90.0f, 0.0f, 1.0f, 0.0f);
    if (tongue->amountInMouth < 6) {
        scaleX *= 1.0f + tongue->amountInMouth / 6.0f;
        scaleZ *= 1.0f + tongue->amountInMouth / 6.0f * 0.5f;
    } else {
        scaleX *= 2.0f;
        scaleZ *= 1.5f;
    }

    if (gGameModeCurrent == GAME_MODE_CREDITS) {
        guScale(&arg0->playerScale[playerIndex], scaleX * 0.9f, scaleY * 0.9f, scaleZ * 0.9f);
    } else {
        guScale(&arg0->playerScale[playerIndex], scaleX, scaleY, scaleZ);
    }

    gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->playerTranslate[playerIndex]), G_MTX_PUSH | G_MTX_MUL | G_MTX_MODELVIEW);
    gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->playerRotate[playerIndex]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
    gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->playerScale[playerIndex]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
    if (player->playerHURTSTATE != 3 || gTimer % 2 == 0) {
        Gfx* dlist = Davy_restAssociate_Gfx;
        if (gSelectedCharacters[playerIndex] <= CHARA_WHITE) {
            if (Battle_GameType == BATTLE_TYPE_UNK_0) {
                dlist = ChameleonGfxs[gSelectedCharacters[playerIndex]];
            } else {
                dlist = D_800F0650[gSelectedCharacters[playerIndex]];
            }
        }
        PutDList(&D_800FF8D4, &gfxPos, dlist);
    }
    gSPPopMatrix(gfxPos++, G_MTX_MODELVIEW);
    return gfxPos;
}

Gfx* func_8002A4C4(GraphicStruct* arg0, Gfx* gfxPos, PlayerActor* player, Tongue* tongue, s32 playerIndex) {
    s32 i;
    
    for (i = 0; i < 6; i++) {
        Mtx sp100, spC0;
        f32 f20 = (player->reticleSize - 1.0f) * 0.5f;
        f32 scale = 1.0f;

        if (gTimer % 2 == i % 2) {
            continue;
        }
        
        guTranslate(&arg0->reticuleTranslate[playerIndex][i], player->unk_DC[i], player->pos.y + player->tongueYOffset, player->unk_F4[i]);
        guRotate(&sp100, player->yAngle + 90.0f, 0.0f, 1.0f, 0.0f);
        guRotate(&spC0, gTimer * f20 * 30.0f + 45.0f, 0.0f, 0.0f, 1.0f);
        guMtxCatL(&spC0, &sp100, &arg0->reticuleRotate[playerIndex][i]);
        scale += f20 * 1.5f + sinf((gTimer % 8) * PI_2 / 8) * f20 * 0.5f;
        scale *= 0.8f;
        guScale(&arg0->reticuleScale[playerIndex][i], scale, scale, scale);
        gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->reticuleTranslate[playerIndex][i]), G_MTX_PUSH | G_MTX_MUL | G_MTX_MODELVIEW);
        gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->reticuleRotate[playerIndex][i]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
        gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->reticuleScale[playerIndex][i]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
        if (tongue->amountInMouth != 0) {
            gDPSetPrimColor(gfxPos++, 0, 0, 255, 255, 0, 255);
        } else {
            gDPSetPrimColor(gfxPos++, 0, 0, 0, 255, 255, 255);
        }
        gSPDisplayList(gfxPos++, static0_gfx6_Gfx);
        gSPPopMatrix(gfxPos++, G_MTX_MODELVIEW);
    }

    return gfxPos;
}

Gfx* func_8002A824(GraphicStruct* arg0, Gfx* gfxPos, PlayerActor* player, Tongue* tongue, s32 playerIndex) {
    s32 i;
    s32 sp160 = FALSE;
    f32 f28 = 1.0f;
    Mtx sp118, spD8;    

    if (player->power == 3) {
        f28 = 0.5f;
    }
    if (tongue->tongueMode == 4 || tongue->tongueMode == 5 || tongue->tongueMode == 11) {
        sp160 = TRUE;
    }

    for (i = tongue->poleSegmentAt; i < tongue->segments; i++) {
        guTranslate(&arg0->tongueTranslate[playerIndex][i], 
                    tongue->tongueXs[i] + player->pos.x,
                    tongue->tongueYs[i] + player->pos.y + player->tongueYOffset,
                    tongue->tongueZs[i] + player->pos.z);
        if (tongue->vaulting == 1) {
            
            guRotate(&sp118, tongue->angleOfVault - 90.0f, 0.0f, 1.0f, 0.0f);
            guRotate(&spD8, 90.0f - tongue->reset1[i], 1.0f, 0.0f, 0.0f);
            guMtxCatL(&spD8, &sp118, &arg0->tongueRotate[playerIndex][i]);
        } else {
            guRotate(&arg0->tongueRotate[playerIndex][i], tongue->tongueAngles[i] + 90.0f, 0.0f, 1.0f, 0.0f);
        }
        if (sp160 && i == tongue->segments - 1) {
            guScale(&arg0->tongueScale[playerIndex][i], 0.06f * f28, 0.06f * f28, tongue->lastTongueOffset);
        } else {
            guScale(&arg0->tongueScale[playerIndex][i], 0.06f * f28, 0.06f * f28, f28);
        }
        gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->tongueTranslate[playerIndex][i]), G_MTX_PUSH | G_MTX_MUL | G_MTX_MODELVIEW);
        gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->tongueRotate[playerIndex][i]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
        gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->tongueScale[playerIndex][i]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);

        if (i < 16) {
            s32 v1 = i * 220;
            if (tongue->wallTime != 0 && gTimer % 2) {
                gDPSetPrimColor(gfxPos++, 0, 0, 255, 35 + v1 / 16, 0, 255);
            } else {
                gDPSetPrimColor(gfxPos++, 0, 0, 35 + v1 / 16, 0, 0, 255);
            }
        } else {
            s32 v1 = (i - 16) * 255;
            if (tongue->wallTime != 0 && gTimer % 2) {
                gDPSetPrimColor(gfxPos++, 0, 0, 255, 255, v1 / 16, 255);
            } else {
                gDPSetPrimColor(gfxPos++, 0, 0, 255, v1 / 16, 0, 255);
            }
        }

        gSPDisplayList(gfxPos++, static0_gfx5_Gfx);
        gSPPopMatrix(gfxPos++, G_MTX_MODELVIEW);
    }

    if (sp160) {
        guTranslate(&arg0->tongueTranslate[playerIndex][32], 
                    tongue->tongueXs[32] + player->pos.x,
                    tongue->tongueYs[32] + player->pos.y + player->tongueYOffset,
                    tongue->tongueZs[32] + player->pos.z);
        guRotate(&arg0->tongueRotate[playerIndex][32], tongue->tongueAngles[32] + 90.0f, 0.0f, 1.0f, 0.0f);
        guScale(&arg0->tongueScale[playerIndex][32], 0.12f, 0.12f, 0.12f);
        gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->tongueTranslate[playerIndex][32]), G_MTX_PUSH | G_MTX_MUL | G_MTX_MODELVIEW);
        gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->tongueRotate[playerIndex][32]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
        gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->tongueScale[playerIndex][32]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
        gSPDisplayList(gfxPos++, Global_unusedStructure_Gfx);
        gSPPopMatrix(gfxPos++, G_MTX_MODELVIEW);
    }

    return gfxPos;
}

void func_8002AE3C(void) {
    s32 i;
    f32 scale;
    s32 s1;
    s32 a1;
    s32 temp = 15;

    for (i = 0; i < MAX_ACTORS; i++) {
        scale = 2.0f;
        a1 = FALSE;

        if (gActors[i].actorState == 2) {
            continue;
        }        

        if (func_80026C78(&gActors[i])) {
            continue;
        }

        if (gActors[i].actorID >= BIG_FEET_POWER_UP &&
            gActors[i].actorID <= SHRINK_ENEMY_POWER_UP &&
            gActors[i].userVariables[1] > gActors[i].unk_124 - 30 &&
            gActors[i].globalTimer % 2 != 0) {
            continue;
        }

        switch(gActors[i].actorID) {
            case R_HEART:
            case FALLING_R_HEART:
                s1 = 19;
                break;
            case O_HEART:
                s1 = 20;
                scale = 2.2f;
                break;
            case Y_HEART:
                s1 = 21;
                scale = 2.4f;
                break;
            case CROWN:
                s1 = 18;
                scale = 2.5f;
                break;
            case CARROT:
                s1 = 26;
                break;
            case UNK_65:
                s1 = 26;
                break;
            case TIME_STOP_POWER_UP:
                s1 = 27;
                scale = 2.2f;
                break;
            case BIG_FEET_POWER_UP:
                s1 = 22;
                scale = 2.5f;
                break;
            case BIG_HEAD_POWER_UP:
                s1 = 23;
                scale = 2.5f;
                break;
            case SHRINK_POWER_UP:
                s1 = 24;
                scale = 2.5f;
                break;
            case SHRINK_ENEMY_POWER_UP:
                s1 = 25;
                scale = 2.5f;
                break;
            case BL_BOSS_SEGMENT:
                if (gActors[i].globalTimer < 100) {
                    continue;
                }
                if (gActors[i].userVariables[3] > 0 && gActors[i].userVariables[3] <= 10) {
                    f32 f16 = temp * (1 - gActors[i].userVariables[3]) + 150;
                    func_8005747C(gActors[i].pos.x, 
                                  gActors[i].pos.y + (gActors[i].unknownPositionThings[0].unk_10 + f16) * 0.5f,
                                  gActors[i].pos.z,
                                  f16 + 2.0f * gActors[i].unknownPositionThings[0].unk_0C,
                                  f16 + 2.0f * gActors[i].unknownPositionThings[0].unk_0C,
                                  (f32)(gTimer % 32) / 32,
                                  gActors[i].userVariables[3] >= 3 && gActors[i].userVariables[3] < 10 ? 0xD3 : 0x2B);
                }
                a1 = TRUE;
                break;
            default:
                continue;
        }
        if (!a1) {
            func_8005747C(gActors[i].pos.x, 
                          gActors[i].pos.y + gActors[i].unknownPositionThings[0].unk_10 * 0.5f,
                          gActors[i].pos.z,
                          scale * gActors[i].unknownPositionThings[0].unk_0C,
                          scale * gActors[i].unknownPositionThings[0].unk_0C,
                          (f32)(gTimer % 31) / 32,
                          s1);
        }
    }

}

Gfx* func_8002B118(GraphicStruct* arg0, Gfx* gfxPos, Gfx* dlist, Actor* actor, f32 scale, s32 arg5, s32* mtxIndex) {
    Mtx sp300, sp2C0, sp280, sp240;
    Mtx sp200, sp1C0;
    Mtx sp180, sp140;
    Mtx sp100, spC0;
    Mtx sp80, sp40;

    scale *= actor->sizeScalar;
    actor->unk_E8 *= actor->sizeScalar;
    guTranslate(&arg0->actorTranslate[*mtxIndex], actor->pos.x, actor->pos.y + actor->unk_E8, actor->pos.z);
    if (actor->actorID == YELLOW_ANT && actor->userVariables[0] > 0) {
        guRotate(&sp300, actor->unk_90 - actor->unk_134[2], 0.0f, 1.0f, 0.0f);
        guRotate(&sp2C0, actor->unk_134[1], 1.0f, 0.0f, 0.0f);
        guRotate(&sp280, actor->unk_134[0] + 90.0f, 0.0f, 1.0f, 0.0f);
        guMtxCatL(&sp300, &sp2C0, &sp240);
        guMtxCatL(&sp240, &sp280, &arg0->actorRotate[*mtxIndex]);
    } else if (actor->actorID == ANT_QUEEN && (actor->userVariables[1] == 10 || actor->userVariables[1] == 11 || actor->userVariables[1] == 12 || actor->userVariables[1] == 14)) {
        guRotate(&sp1C0, actor->unk_134[1], 0.0f, 0.0f, 1.0f);
        guRotate(&sp200, actor->unk_90 + 90.0f, 0.0f, 1.0f, 0.0f);
        guMtxCatL(&sp1C0, &sp200, &arg0->actorRotate[*mtxIndex]);
    } else if (actor->actorID == ARMADILLO || actor->actorID == BOULDER || actor->actorID == LIZARD_KONG_BOULDER) {
        if (actor->actorID == BOULDER && actor->userVariables[0] == 0) {
            return gfxPos;
        }
        guRotate(&sp140, actor->unk_134[3], 1.0f, 0.0f, 0.0f);
        guRotate(&sp180, actor->unk_90 + 90.0f, 0.0f, 1.0f, 0.0f);
        guMtxCatL(&sp140, &sp180, &arg0->actorRotate[*mtxIndex]);
    } else if (actor->actorID == FISH) {
        if (arg5 == 0) {
            guRotate(&arg0->actorRotate[*mtxIndex], actor->unk_134[2] + actor->unk_C0 + 90.0f, 0.0f, 1.0f, 0.0f);
        } else {
            guRotate(&arg0->actorRotate[*mtxIndex], actor->unk_134[3] + actor->unk_C0 + 90.0f, 0.0f, 1.0f, 0.0f);
        }
    } else if (actor->actorID == PILE_OF_BOOKS) {
        if (actor->userVariables[2] >= 9 && actor->userVariables[2] <= 11) {
            guRotate(&spC0, actor->unk_134[4], 1.0f, 0.0f, 0.0f);
        } else {
            guRotate(&spC0, 0.0f, 1.0f, 0.0f, 0.0f);
        }
        guRotate(&sp100, actor->unk_90 + 90.0f, 0.0f, 1.0f, 0.0f);
        guMtxCatL(&spC0, &sp100, &arg0->actorRotate[*mtxIndex]);
    } else if (actor->actorID == CAKE_BOSS && arg5 == 1) {
        guRotate(&arg0->actorRotate[*mtxIndex], actor->unk_134[3], 0.0f, 1.0f, 0.0f);
    } else if (actor->actorID == CAKE_BOSS_STRAWBERRY) {
        guRotate(&sp40, actor->unk_134[0], 1.0f, 0.0f, 0.0f);
        guRotate(&sp80, actor->unk_90 + 90.0f, 0.0f, 1.0f, 0.0f);
        guMtxCatL(&sp40, &sp80, &arg0->actorRotate[*mtxIndex]);
    } else {
        guRotate(&arg0->actorRotate[*mtxIndex], actor->unk_C0 + actor->unk_90 + 90.0f, 0.0f, 1.0f, 0.0f);
    }

    guScale(&arg0->actorScale[*mtxIndex], scale, scale, scale);
    gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->actorTranslate[*mtxIndex]), G_MTX_PUSH | G_MTX_MUL | G_MTX_MODELVIEW);
    gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->actorRotate[*mtxIndex]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
    gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->actorScale[*mtxIndex]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
    PutDList(&D_800FF8D4, &gfxPos, dlist);
    gSPPopMatrix(gfxPos++, G_MTX_MODELVIEW);
    (*mtxIndex)++;
    return gfxPos;
}

Gfx* func_8002B7BC(GraphicStruct* arg0, Gfx* gfxPos) {
    s32 i;
    s32 sp178 = 0;
    f32 scale1;
    Gfx* gfx1;

    for (i = 0; i < MAX_ACTORS; i++) {
        if (gActors[i].actorID == ACTOR_NULL) {
            continue;
        }

        if (gActors[i].actorState == 2 || gActors[i].actorState == 4 && (gActors[i].unk_C8 & 1) && D_80174980 != 3 || func_80026C78(&gActors[i])) {
            continue;
        }
        
        switch (gActors[i].actorID) {
            case YELLOW_ANT:
                gActors[i].unk_E8 = gActors[i].unk_134[5] - 40.0f;
                gfxPos = func_8002B118(arg0, gfxPos, AntLand_yellowAnt_gfx14_Gfx, &gActors[i], 3.0f, 0, &sp178);
                break;
            case ANT_QUEEN:
                gActors[i].unk_E8 = gActors[i].unk_134[5];
                gfxPos = func_8002B118(arg0, gfxPos, D_300EFC0, &gActors[i], 4.0f, 0, &sp178);
                break;
            case BL_BOSS_SEGMENT:
                if (gActors[i].globalTimer >= 100) {
                    if (gActors[i].userVariables[3] == 0) {
                        gActors[i].unk_E8 = 0.0f;
                        gfxPos = func_8002B118(arg0, gfxPos, D_3007EA0, &gActors[i], 10.0f, 0, &sp178);
                    } else if (gActors[i].userVariables[3] == 10) {
                        gActors[i].unk_E8 = 0;
                        gfxPos = func_8002B118(arg0, gfxPos, D_3008428, &gActors[i], 10.0f, 0, &sp178);
                    }
                }
                break;
            case CANNON:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, BombLand_unk74_Gfx, &gActors[i], 4.0f, 0, &sp178);
                break;
            case UNK_1F:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_3012460, &gActors[i], 2.0f, 0, &sp178);
                break;
            case POGO:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, KidsLand_actorModel9_Gfx, &gActors[i], 3.0f, 0, &sp178);
                break;
            case CAKE_BOSS:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_30081F8, &gActors[i], 8.0f, 0, &sp178);
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_30093A8, &gActors[i], 8.0f, 1, &sp178);
                break;
            case CAKE_BOSS_STRAWBERRY:
                if (gActors[i].unk_128 == 6) {
                    scale1 = 16.0f;
                } else {
                    scale1 = 8.0f;
                }
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_300A9E0, &gActors[i], scale1, 0, &sp178);
                break;
            case BOWLING_PINS:
                if (D_800FE400 == 0) {
                    gfx1 = KidsLand_actorModel10_Gfx;
                } else {
                    gfx1 = KidsLand_actorModel12_Gfx;
                }
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, gfx1, &gActors[i], 3.0f, 0, &sp178);
                break;
            case ARROWS:
                gActors[i].unk_E8 = 50.0f;
                gfxPos = func_8002B118(arg0, gfxPos, DesertCastle_actorModel4_Gfx, &gActors[i], 3.0f, 0, &sp178);
                break;
            case CHOMPER:
                scale1 = gActors[i].unk_164 * 6.0f;
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, DesertCastle_actorModel19_Gfx, &gActors[i], scale1, 0, &sp178);
                break;
            case BOULDER:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, DesertCastle_actorModel21_Gfx, &gActors[i], 2.0f, 0, &sp178);
                break;
            case ARMADILLO:
                gActors[i].unk_E8 = gActors[i].unk_134[4];
                gfxPos = func_8002B118(arg0, gfxPos, D_300CED0, &gActors[i], 3.0f, 0, &sp178);
                break;
            case SANDAL:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_306DDC0, &gActors[i], 2.0f, 0, &sp178);
                break;
            case METAL_SHEET:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_306F3C8, &gActors[i], 2.0f, 0, &sp178);
                break;
            case SCROLL:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_30708F0, &gActors[i], 3.0f, 0, &sp178);
                break;
            case FIRE_SPITTER:
                gActors[i].unk_E8 = gActors[i].unknownPositionThings[0].unk_10 / 2;
                gfxPos = func_8002B118(arg0, gfxPos, D_30740B0, &gActors[i], 2.0f, 0, &sp178);
                break;
            case PILE_OF_BOOKS:
                gActors[i].unk_E8 = -60.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_3010220, &gActors[i], 6.0f, 0, &sp178);
                break;
            case PILE_OF_BOOKS_ARM_SPITTER:
                gActors[i].unk_E8 = gActors[i].unknownPositionThings[0].unk_10 / 2;
                gfxPos = func_8002B118(arg0, gfxPos, D_3013390, &gActors[i], 3.0f, 0, &sp178);
                break;
            case GOLEM:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, JungleLand_unkunk_Gfx, &gActors[i], 4.0f, 0, &sp178);
                break;
            case SPIDER_SPAWNER:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, JungleLand_unkunk2_Gfx, &gActors[i], 2.0f, 0, &sp178);
                break;
            case FISH:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, JungleLand_unkunk3_Gfx, &gActors[i], 1.4f, 0, &sp178);
                gfxPos = func_8002B118(arg0, gfxPos, JungleLand_unkunk4_Gfx, &gActors[i], 1.4f, 1, &sp178);
                break;
            case LIZARD_KONG_BOULDER:
                gActors[i].unk_E8 = gActors[i].unknownPositionThings[0].unk_10 / 2;
                gfxPos = func_8002B118(arg0, gfxPos, D_3011318, &gActors[i], 2.0f, 0, &sp178);
                break;
            case LIZARD_KONG:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_300DB48, &gActors[i], 3.0f, 0, &sp178);
                if (gActors[i].unk_EC == 1 && gActors[i].unk_F0 > 25 && gActors[i].unk_F0 < 62) {
                    s32 unused;
                    Mtx* sp168;
                    Mtx sp128;
                    Mtx spE8;
                    Mtx spA8;
                    s32 spA4;
                    s32 spA0;
                    f32 sp9C, sp98, sp94;
                    f32 sp90, sp8C, sp88;

                    sp168 = NULL;
                    guRotate(&spE8, gActors[i].unk_90 + 90.0f, 0, 1.0f, 0);
                    func_80027138(&D_3025DA8, &spA4, &spA0, &sp168);

                    sp128 = sp168[6 + (gActors[i].unk_F0 / 2) * spA4];
                    guMtxCatL(&sp128, &spE8, &spA8);
                    guMtxXFML(&spA8, -120.0f, 0.0f, 0.0f, &sp9C, &sp98, &sp94);

                    sp128 = sp168[8 + (gActors[i].unk_F0 / 2) * spA4];
                    guMtxCatL(&sp128, &spE8, &spA8);
                    guMtxXFML(&spA8, 120.0f, 0.0f, 0.0f, &sp90, &sp8C, &sp88);
                    guTranslate(&arg0->actorTranslate[sp178], gActors[i].pos.x + 3.0f * ((sp9C + sp90) * 0.5f),
                                                              gActors[i].pos.y + 3.0f * ((sp98 + sp8C) * 0.5f),
                                                              gActors[i].pos.z + 3.0f * ((sp94 + sp88) * 0.5f));
                    guRotate(&arg0->actorRotate[sp178], gActors[i].unk_90 + 90.0f, 0, 1.0f, 0);
                    guScale(&arg0->actorScale[sp178], 2.0f, 2.0f, 2.0f);
                    gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->actorTranslate[sp178]), G_MTX_PUSH | G_MTX_MUL | G_MTX_MODELVIEW);
                    gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->actorRotate[sp178]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
                    gSPMatrix(gfxPos++, OS_K0_TO_PHYSICAL(&arg0->actorScale[sp178]), G_MTX_NOPUSH | G_MTX_MUL | G_MTX_MODELVIEW);
                    PutDList(&D_800FF8D4, &gfxPos, D_3011318);
                    gSPPopMatrix(gfxPos++, G_MTX_MODELVIEW);
                }
                break;
            case POPCORN_BUCKET:
                gActors[i].unk_E8 = 0.0f;
                gfxPos = func_8002B118(arg0, gfxPos, D_3012460, &gActors[i], 2.0f, 0, &sp178);
                break;
        }
    }

    return gfxPos;
}

#ifdef NON_MATCHING
Gfx* func_8002C280(GraphicStruct* arg0, Gfx* gfxPos) {
    s32 i;

    gfxPos = func_8007B524(arg0, gfxPos, gCamera);
    D_800FF8D4 = arg0->unk1e880;
    gfxPos = func_8005F408(gfxPos);

    for (i = 0; i < 4; i++) {
        if (!gPlayerActors[i].exists) {
            continue;
        }
        gfxPos = func_8002A190(arg0, gfxPos, &gPlayerActors[i], &gTongues[i], i);
        gfxPos = func_8002A824(arg0, gfxPos, &gPlayerActors[i], &gTongues[i], i);
    }
    gfxPos = func_8002B7BC(arg0, gfxPos);
    gfxPos = func_800C3B50(arg0, gfxPos);
    for (i = 0; i < 4; i++) {
        if (!gPlayerActors[i].exists) {
            continue;
        }
        func_800849DC(i, &gTongues[i], &gPlayerActors[i], gCamera);
        gfxPos = func_800849D4(gfxPos);
    }

    func_800849DC(0, &gTongues[0], &gPlayerActors[0], gCamera);
    gfxPos = func_80084884(gfxPos);
    gfxPos = func_8007ABDC(gfxPos);

    func_8002AE3C();
    debugMain();

    gfxPos = Shadows_Draw(arg0, gfxPos);

    if (D_80176F58 == 0) {
        for (i = 0; i < 4; i++) {
            if (!gPlayerActors[i].exists) {
                continue;
            }
            if (gGameModeCurrent == 20 || D_80174980 == 3) {
                continue;
            }
            if (gTongues[i].amountInMouth != 0 && gTongues[i].tongueMode == 0 || gPlayerActors[i].locked != 0 || gPlayerActors[i].amountLeftToShoot != 0) {
                gfxPos = func_8002A4C4(arg0, gfxPos, &gPlayerActors[i], &gTongues[i], i);
            }
        }
    }

    return gfxPos;
}
#else
#pragma GLOBAL_ASM("asm/nonmatchings/code/1050/func_8002C280.s")
Gfx* func_8002C280(GraphicStruct* arg0, Gfx* gfxPos);
#endif

#ifdef NON_MATCHING
Gfx* func_8002C4E8(Gfx* gfxPos, s32 arg1, s32 arg2) {
    s32 i;

    gSPSegment(gfxPos++, 0x00, 0);
    gSPSegment(gfxPos++, 0x01, OS_K0_TO_PHYSICAL(_ALIGN((u32)D_803B5000 - (u32)D_1045C00 + (u32)D_1000000, 0x10)));

    for (i = 2; i < 16; i++) {
        if (D_80100F50[i].base_address != NULL) {
            gSPSegment(gfxPos++, i, OS_K0_TO_PHYSICAL(D_80100F50[i].base_address));
        }
    }

    if (D_800FFEC0 != 0) {
        gSPDisplayList(gfxPos++, D_1015AE8);
    } else {
        gSPDisplayList(gfxPos++, D_1015AB8);
    }
    gSPDisplayList(gfxPos++, D_1015A70);

    if (D_800FFEC0 != 0) {
        gDPSetCycleType(gfxPos++, G_CYC_FILL);
        gDPSetRenderMode(gfxPos++, G_RM_NOOP, G_RM_NOOP2);
        gDPSetColorImage(gfxPos++, G_IM_FMT_RGBA, G_IM_SIZ_16b, 320, OS_K0_TO_PHYSICAL(&D_803B5000[arg1]));
        gDPSetFillColor(gfxPos++, PACK_FILL_COLOR(0, 0, 0, 1));
        gDPFillRectangle(gfxPos++, 0, 0, 319, 239);
        gDPPipeSync(gfxPos++);
    } else {
        gDPSetCycleType(gfxPos++, G_CYC_FILL);
        gDPSetRenderMode(gfxPos++, G_RM_NOOP, G_RM_NOOP2);
        gDPSetColorImage(gfxPos++, G_IM_FMT_RGBA, G_IM_SIZ_16b, 320, OS_K0_TO_PHYSICAL(&D_803B5000[arg1]));
        gDPSetFillColor(gfxPos++, PACK_FILL_COLOR(D_800FF8DC, D_800FF8E0, D_800FF8E4, 1));
        gDPFillRectangle(gfxPos++, 18, 16, 301, 223);
        gDPPipeSync(gfxPos++);
    }

    if (D_800FFEC0 != 0){
        D_800FFEC0--;
    }
    return gfxPos;
}
#else
#pragma GLOBAL_ASM("asm/nonmatchings/code/1050/func_8002C4E8.s")
Gfx* func_8002C4E8(Gfx* gfxPos, s32 arg1, s32 arg2);
#endif

Gfx* func_8002C900(GraphicStruct* arg0, s32 arg1) {
    Gfx* gfxPos = arg0->dlist;
    s32 i;

    gfxPos = func_8002C4E8(arg0->dlist, arg1, 0);
    gSPDisplayList(gfxPos++, D_1015B18);
    gDPSetColorImage(gfxPos++, G_IM_FMT_RGBA, G_IM_SIZ_16b, 320, OS_K0_TO_PHYSICAL(&D_803B5000[arg1]));
    gfxPos = func_8002C280(arg0, gfxPos);
    D_800FF8D4 = arg0->unk1e880;

    for (i = 0; i < ARRAY_COUNT(gPlayerActors); i++) {
        if (!gPlayerActors[i].exists) {
            continue;
        }
        func_80025EF0(&gPlayerActors[i], &gTongues[i], i);
    }

    func_80027694(arg0);
    func_80084A04();
    func_8005CA38();
    gfxPos = func_8007A2D8(gfxPos, gCamera);
    func_8008C1C8(&gfxPos);
    gfxPos = func_8005CA44(gfxPos);
    func_8007AC60(gCamera, gPlayerActors);
    func_8008C35C(&gfxPos);
    gDPFullSync(gfxPos++);
    gSPEndDisplayList(gfxPos++);
    return gfxPos;
}

Gfx* func_8002CAC8(GraphicStruct* arg0, s32 arg1) {
    Gfx* gdl;

    gdl = func_8002C4E8(arg0->dlist, arg1, 1);
    gDPFullSync(gdl++);
    gSPEndDisplayList(gdl++);
    return gdl;
}

void Video_SetTask(GraphicStruct* arg0, Gfx* arg1, s32 arg2) {
    OSTask_t* task = &D_800F04E0[arg2].t;
    task->ucode_boot = (u64*)rspbootTextStart;
    task->ucode_boot_size =  ((s32)gspFast3DTextStart - (s32)rspbootTextStart);
    //TODO: fix &rspbootTextStart[208 / 8]
    task->ucode = (u64*)&rspbootTextStart[208 / 8]; //?
    task->ucode_data = (u64*)gspFast3DDataStart;
    task->output_buff_size = (u64*)D_80129720;
    task->data_ptr = (u64*)arg0;
    task->data_size = (((s32)arg1 - (s32)arg0) >> 3) << 3;
}

void DemoGfx_DrawFrame(Gfx* arg0, GraphicStruct* arg1, s32 fbIndex) {

    if (D_80174998 < 3) {
        arg0 = func_8002CAC8(arg1, fbIndex);
    }
    
    Video_SetTask(arg1, arg0, fbIndex);
    osWritebackDCache(arg1, sizeof(GraphicStruct));
    Sched_SetGfxTask(&D_800F04E0[fbIndex], fbIndex);
}

void DemoGfx_SwapFB(s32 fbIndex) {
    Timing_StopProcess();
    osRecvMesg(&gFrameDrawnMessageQueue, NULL, OS_MESG_BLOCK);
    osViSwapBuffer(&D_803B5000[fbIndex].data);
    osViSetSpecialFeatures(OS_VI_GAMMA_ON|OS_VI_GAMMA_DITHER_ON);
    
    if (MQ_IS_FULL(&gSyncMessageQueue)) {
        osRecvMesg(&gSyncMessageQueue, NULL, OS_MESG_BLOCK);
    }
    
    func_8008C554();
    osRecvMesg(&gSyncMessageQueue, NULL, OS_MESG_BLOCK);
    Timing_StartProcess();
}

//update framebuffer
Gfx* func_8002CCA0(GraphicStruct* arg0, s32 arg1) {
    Gfx* sp1C;

    if (D_80174998 > 2) {
        sp1C = func_8002C900(arg0, arg1);
    }

    return sp1C;
}

void func_8002CCDC(void) {
    StopBGM();
    func_80088198();
}

void func_8002CD04(void) {
    DMAStruct_Print();
    D_80174878++;

    if (D_800F06EC >= 0) {
        D_80174878 = D_800F06EC;
    }

    D_80174878 = LoadStageByIndex(D_80174878);
    func_8002E0CC();
    InitField();
    func_8002CCDC();
    func_80056EB4();
    Effect_Init();
    func_8005C9B8();
    func_80084788();
}

void func_8002CD94(s32 arg0) {
    if (arg0 == 2) {
        osViBlack(0);
    }
}

void func_8002CDBC(ContMain* controllers) {
    s32 i;

    if (gCurrentStage != STAGE_VS) {
        D_80168D78[0] = 0;
        return;
    }

    for (i = 0; i < MAXCONTROLLERS; i++) {
        if (D_80168D78[i] != 0) {
            D_80168D78[i] = 1;
            func_8004CD9C(i, &controllers[i].buttons0);
        }
    }
}

void func_8002CE54(void) {
    s32 var;
    s32 i;
    ContMain sp28[4];
    
    D_800F066C++;
    func_8002CD94(D_800F066C);
    Controller_StartRead();
    DemoGfx_DrawFrame(0, &gGraphicsList[gFramebufferIndex], gFramebufferIndex);
    
    for (i = 0; i < MAXCONTROLLERS; i++) {
        Controller_Zero(&sp28[i]);
    }
    
    if (D_80174980 == 5) {
        D_80168D78[0] = 1;
        func_8004BC48(&sp28[0]);
        func_8004E784(sp28, D_80168DA0, D_80168D78, sp28);
        D_800FF8DC = 0;
        D_800FF8E0 = 0;
        D_800FF8E4 = 0;
    } else {
        if (Battle_GameType != 0) {
            if (sDebugMultiplayer != 0) {
                D_80168D78[1] = 1;
                func_8004CD9C(1, &sp28[1]);
                D_80168D78[2] = 2;
                func_8004CD9C(2, &sp28[2]);
                D_80168D78[3] = 3;
                func_8004CD9C(3, &sp28[3]);
            } else {
                func_8002CDBC(&sp28[0]);
            }
        } else if (D_801749B0 != 0) {
            D_80168D78[1] = 1;
            func_8004CD9C(1, &sp28[1]);
        } else {
            D_80168D78[0] = 0;
        }
        func_8004E784(sp28, 4, D_80168D78, sp28);
    }
    
    func_8004DDE0();
    Battle_Update();
    var = 1 - gFramebufferIndex;
    func_8002CCA0(&gGraphicsList[var], var);
    DemoGfx_SwapFB(gFramebufferIndex);
    gFramebufferIndex = 1 - gFramebufferIndex;
}

void func_8002D080(void) {
    D_80174878 = -1;
    gControllerNo = Controller_Init();   // @returned: number of controllers
    gPlayerActors[0].active = 1;
    gPlayerActors[1].active = 0;
    gPlayerActors[2].active = 0;
    gPlayerActors[3].active = 0;
    Audio_StartThread();
    Sched_StartThread();
}